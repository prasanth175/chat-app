(this["webpackJsonpchat-app"]=this["webpackJsonpchat-app"]||[]).push([[0],{25:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"e",(function(){return o})),n.d(t,"f",(function(){return l})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return b})),n.d(t,"d",(function(){return d}));var c=n(15),a=n(16),r=n(18),s=n(17);function i(e){var t=e.toUpperCase().split(" ");return t.length>1?t[0][0]+t[1][0]:t[0][0]}function o(e){return e?Object.keys(e):[]}function l(e){return e?Object.keys(e).map((function(t){return Object(s.a)(Object(s.a)({},e[t]),{},{id:t})})):[]}function u(e,t,n,c){return j.apply(this,arguments)}function j(){return(j=Object(r.a)(Object(c.a)().mark((function e(t,n,r,s){var i,o,l,u,j,b,d;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(i={})["/profiles/".concat(t,"/").concat(n)]=r,o=s.ref("/messages").orderByChild("author/uid").equalTo(t).once("value"),l=s.ref("/rooms").orderByChild("lastMessage/author/uid").equalTo(t).once("value"),e.next=6,Promise.all([o,l]);case 6:return u=e.sent,j=Object(a.a)(u,2),b=j[0],d=j[1],b.forEach((function(e){i["/messages/".concat(e.key,"/author/").concat(n)]=r})),d.forEach((function(e){i["/rooms/".concat(e.key,"/lastMessage/author/").concat(n)]=r})),e.abrupt("return",i);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function b(e,t){return e.reduce((function(e,n){var c=t(n);return e[c]||(e[c]=[]),e[c].push(n),e}),{})}var d=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/))},378:function(e,t,n){},379:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),r=n(189),s=n.n(r),i=n(65),o=(n(216),n(13)),l=n(17),u=n(32),j=n(394),b=n(395),d=n(15),h=n(18),O=n(16),f=n(28),m=n(9),p=n(2),x={state:"offline",last_changed:f.a.database.ServerValue.TIMESTAMP},v={state:"online",last_changed:f.a.database.ServerValue.TIMESTAMP},g=Object(c.createContext)();var k=function(e){var t=e.children,n=Object(c.useState)(null),a=Object(O.a)(n,2),r=a[0],s=a[1],i=Object(c.useState)(!0),o=Object(O.a)(i,2),l=o[0],u=o[1];return Object(c.useEffect)((function(){var e,t,n,c=m.a.onAuthStateChanged(function(){var c=Object(h.a)(Object(d.a)().mark((function c(a){var r;return Object(d.a)().wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(!a){c.next=21;break}if(t=m.b.ref("/status/".concat(a.uid)),(e=m.b.ref("/profiles/".concat(a.uid))).on("value",(function(e){var t=e.val(),n=t.name,c=t.createdAt,r={name:n,avatar:t.avatar,createdAt:c,uid:a.uid,email:a.email};s(r),u(!1)})),m.b.ref(".info/connected").on("value",(function(e){!1!==!!e.val()&&t.onDisconnect().set(x).then((function(){t.set(v)}))})),!m.e){c.next=19;break}return c.prev=6,c.next=9,m.e.getToken({vapidKey:m.c});case 9:if(!(r=c.sent)){c.next=13;break}return c.next=13,m.b.ref("/fcm_token/".concat(r)).set(a.uid);case 13:c.next=18;break;case 15:c.prev=15,c.t0=c.catch(6),console.log("An error occurred while retrieving token. ",c.t0);case 18:n=m.e.onTokenRefresh(Object(h.a)(Object(d.a)().mark((function e(){var t;return Object(d.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.e.getToken();case 3:if(!(t=e.sent)){e.next=7;break}return e.next=7,m.b.ref("/fcm_token/".concat(t)).set(a.uid);case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log("An error occurred while retrieving token. ",e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])}))));case 19:c.next=27;break;case 21:e&&e.off(),t&&t.off(),n&&n(),m.b.ref(".info/connected").off(),s(null),u(!1);case 27:case"end":return c.stop()}}),c,null,[[6,15]])})));return function(e){return c.apply(this,arguments)}}());return function(){c(),m.b.ref(".info/connected").off(),e&&e.off(),n&&n(),t&&t.off()}}),[]),Object(p.jsx)(g.Provider,{value:{isLoading:l,profile:r},children:t})},w=function(){return Object(c.useContext)(g)},y=["children"];var C=function(e){var t=e.children,n=Object(u.a)(e,y),c=w(),a=c.profile,r=c.isLoading;return r&&!a?Object(p.jsx)(j.a,{children:Object(p.jsx)(b.a,{center:!0,vertical:!0,size:"md",content:"Loading",speed:"slow"})}):a||r?Object(p.jsx)("div",{children:Object(p.jsx)(o.b,Object(l.a)(Object(l.a)({},n),{},{children:t}))}):Object(p.jsx)(o.a,{to:"/signin"})},N=n(405),S=n(406),T=n(407),D=n(402),I=n(40),E=n(396),L=n(397),H=n(104),U=n(66),A=n(386),F=n(398),M=n(387),R=n(399),B=n(392);function z(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=Object(c.useState)(e),n=Object(O.a)(t,2),a=n[0],r=n[1],s=Object(c.useCallback)((function(){return r(!0)}),[]),i=Object(c.useCallback)((function(){return r(!1)}),[]);return{isOpen:a,open:s,close:i}}var q=function(e){var t=Object(c.useState)((function(){return window.matchMedia(e).matches})),n=Object(O.a)(t,2),a=n[0],r=n[1];return Object(c.useEffect)((function(){var t=window.matchMedia(e);r(t.matches);var n=function(e){return r(e.matches)};return t.addListener(n),function(){return t.removeListener(n)}}),[e]),a};var P=E.a.Types.StringType,V=E.a.Model({name:P().isRequired("Chat name is required"),description:P().isRequired("Description is required")}),_={name:"",description:""};var Q=function(){var e=z(),t=e.isOpen,n=e.open,a=e.close,r=Object(c.useState)(_),s=Object(O.a)(r,2),i=s[0],o=s[1],u=Object(c.useState)(!1),j=Object(O.a)(u,2),b=j[0],x=j[1],v=Object(c.useRef)(),g=Object(c.useCallback)((function(e){o(e)}),[]),k=function(){var e=Object(h.a)(Object(d.a)().mark((function e(){var t;return Object(d.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(v.current.check()){e.next=2;break}return e.abrupt("return");case 2:return x(!0),t=Object(l.a)(Object(l.a)({},i),{},{createdAt:f.a.database.ServerValue.TIMESTAMP,admins:Object(I.a)({},m.a.currentUser.uid,!0),fcmUsers:Object(I.a)({},m.a.currentUser.uid,!0)}),e.prev=4,e.next=7,m.b.ref("rooms").push(t);case 7:L.a.info("".concat(i.name," has been created"),4e3),x(!1),o(_),a(),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(4),x(!1),L.a.error(e.t0.message,4e3);case 17:case"end":return e.stop()}}),e,null,[[4,13]])})));return function(){return e.apply(this,arguments)}}();return Object(p.jsxs)("div",{className:"mt-1",children:[Object(p.jsxs)(H.a,{block:!0,color:"green",onClick:n,children:[Object(p.jsx)(U.a,{icon:"creative"})," Create new chat room"]}),Object(p.jsxs)(A.a,{show:t,onHide:a,children:[Object(p.jsx)(A.a.Header,{children:Object(p.jsx)(A.a.Title,{children:"New chat room"})}),Object(p.jsx)(A.a.Body,{children:Object(p.jsxs)(F.a,{fluid:!0,onChange:g,formValue:i,model:V,ref:v,children:[Object(p.jsxs)(M.a,{children:[Object(p.jsx)(R.a,{children:"Room name"}),Object(p.jsx)(B.a,{name:"name",placeholder:"Enter chat room name..."})]}),Object(p.jsxs)(M.a,{children:[Object(p.jsx)(R.a,{children:"Description"}),Object(p.jsx)(B.a,{componentClass:"textarea",rows:5,name:"description",placeholder:"Enter room description..."})]})]})}),Object(p.jsx)(A.a.Footer,{children:Object(p.jsx)(H.a,{block:!0,appearance:"primary",onClick:k,disabled:b,children:"Create new chat room"})})]})]})},G=n(393),Y=n(25),K=n(388),J=n(207),W=["initialValue","onSave","label","placeholder","emptyMsg","wrapperClassName"];var Z=function(e){var t=e.initialValue,n=e.onSave,a=e.label,r=void 0===a?null:a,s=e.placeholder,i=void 0===s?"write your value":s,o=e.emptyMsg,j=void 0===o?"Input is empty":o,b=e.wrapperClassName,f=void 0===b?"":b,m=Object(u.a)(e,W),x=Object(c.useState)(t),v=Object(O.a)(x,2),g=v[0],k=v[1],w=Object(c.useState)(!1),y=Object(O.a)(w,2),C=y[0],N=y[1],S=Object(c.useCallback)((function(e){k(e)}),[]),T=Object(c.useCallback)((function(){N((function(e){return!e})),k(t)}),[t]),D=function(){var e=Object(h.a)(Object(d.a)().mark((function e(){var c;return Object(d.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""===(c=g.trim())&&L.a.info(j,4e3),c===t){e.next=5;break}return e.next=5,n(c);case 5:N(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(p.jsxs)("div",{className:f,children:[r,Object(p.jsxs)(K.a,{children:[Object(p.jsx)(J.a,Object(l.a)(Object(l.a)({},m),{},{disabled:!C,placeholder:i,value:g,onChange:S})),Object(p.jsx)(K.a.Button,{onClick:T,children:Object(p.jsx)(U.a,{icon:C?"close":"edit2"})}),C&&Object(p.jsx)(K.a.Button,{onClick:D,children:Object(p.jsx)(U.a,{icon:"check"})})]})]})},$=n(196),X=n.n($),ee=n(400),te=["name"];var ne=function(e){var t=e.name,n=Object(u.a)(e,te);return Object(p.jsx)(ee.a,Object(l.a)(Object(l.a)({circle:!0},n),{},{children:Object(Y.a)(t)}))},ce=["image/png","image/jpeg","image/jpg"],ae=function(e){return new Promise((function(t,n){e.toBlob((function(e){e?t(e):n(new Error("File process error"))}))}))};var re=function(){var e=z(),t=e.isOpen,n=e.open,a=e.close,r=w().profile,s=Object(c.useState)(null),i=Object(O.a)(s,2),o=i[0],l=i[1],u=Object(c.useState)(!1),j=Object(O.a)(u,2),b=j[0],f=j[1],x=Object(c.useRef)(),v=function(){var e=Object(h.a)(Object(d.a)().mark((function e(){var t,n,c,a,s,i;return Object(d.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=x.current.getImageScaledToCanvas(),f(!0),e.prev=2,e.next=5,ae(t);case 5:return n=e.sent,c=m.f.ref("/profiles/".concat(r.uid)).child("avatar"),e.next=9,c.put(n,{cacheControl:"public, max-age=".concat(259200)});case 9:return a=e.sent,e.next=12,a.ref.getDownloadURL();case 12:return s=e.sent,e.next=15,Object(Y.b)(r.uid,"avatar",s,m.b);case 15:return i=e.sent,e.next=18,m.b.ref().update(i);case 18:f(!1),L.a.info("Avatar has been uploaded",4e3),e.next=26;break;case 22:e.prev=22,e.t0=e.catch(2),f(!1),L.a.error(e.t0.message,4e3);case 26:case"end":return e.stop()}}),e,null,[[2,22]])})));return function(){return e.apply(this,arguments)}}();return Object(p.jsxs)("div",{className:"mt-3 text-center",children:[Object(p.jsx)(ne,{src:r.avatar,name:r.name,className:"width-200 height-200 img-fullsize font-huge"}),Object(p.jsxs)("div",{children:[Object(p.jsxs)("label",{htmlFor:"avatar-upload",className:"d-block cursor-pointer padded",children:["Select new avatar",Object(p.jsx)("input",{id:"avatar-upload",type:"file",className:"d-none",accept:".png, .jpeg, .jpg",onChange:function(e){var t=e.target.files;if(1===t.length){var c=t[0];(function(e){return ce.includes(e.type)})(c)&&(l(c),n())}}})]}),Object(p.jsxs)(A.a,{show:t,onHide:a,children:[Object(p.jsx)(A.a.Header,{children:Object(p.jsx)(A.a.Title,{children:"Adjust and upload new avatar"})}),Object(p.jsx)(A.a.Body,{children:Object(p.jsx)("div",{className:"d-flex justify-content-center align-items-center h-100",children:o&&Object(p.jsx)(X.a,{ref:x,image:o,width:200,height:200,border:10,borderRadius:100,rotate:0})})}),Object(p.jsx)(A.a.Footer,{children:Object(p.jsx)(H.a,{block:!0,appearance:"ghost",onClick:v,disabled:b,children:"Upload new avatar"})})]})]})]})},se=n(401);var ie=function(){var e=Object(c.useState)({"google.com":m.a.currentUser.providerData.some((function(e){return"google.com"===e.providerId})),"facebook.com":m.a.currentUser.providerData.some((function(e){return"facebook.com"===e.providerId}))}),t=Object(O.a)(e,2),n=t[0],a=t[1],r=function(e,t){a((function(n){return Object(l.a)(Object(l.a)({},n),{},Object(I.a)({},e,t))}))},s=function(){var e=Object(h.a)(Object(d.a)().mark((function e(t){return Object(d.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,1!==m.a.currentUser.providerData.length){e.next=3;break}throw new Error("You can not disconnect from ".concat(t));case 3:return e.next=5,m.a.currentUser.unlink(t);case 5:r(t,!1),L.a.info("Disconnected from ".concat(t),4e3),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),L.a.error(e.t0.message,4e3);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),i=function(){var e=Object(h.a)(Object(d.a)().mark((function e(t){return Object(d.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.a.currentUser.linkWithPopup(t);case 3:L.a.info("Linked to ".concat(t.providerId),4e3),r(t.providerId,!0),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),L.a.error(e.t0.message,4e3);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();return Object(p.jsxs)("div",{children:[n["google.com"]&&Object(p.jsxs)(se.a,{color:"green",closable:!0,onClose:function(){s("google.com")},children:[Object(p.jsx)(U.a,{icon:"google"})," Connected"]}),n["facebook.com"]&&Object(p.jsxs)(se.a,{color:"blue",closable:!0,onClose:function(){s("facebook.com")},children:[Object(p.jsx)(U.a,{icon:"facebook"})," Connected"]}),Object(p.jsxs)("div",{className:"mt-2",children:[!n["google.com"]&&Object(p.jsxs)(H.a,{block:!0,color:"green",onClick:function(){i(new f.a.auth.GoogleAuthProvider)},children:[Object(p.jsx)(U.a,{icon:"google"})," Link to Google"]}),!n["facebook.com"]&&Object(p.jsxs)(H.a,{block:!0,color:"blue",onClick:function(){i(new f.a.auth.FacebookAuthProvider)},children:[Object(p.jsx)(U.a,{icon:"facebook"})," Link to Facebook"]})]})]})};var oe=function(e){var t=e.onSignOut,n=w().profile,c=function(){var e=Object(h.a)(Object(d.a)().mark((function e(t){var c;return Object(d.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(Y.b)(n.uid,"name",t,m.b);case 3:return c=e.sent,e.next=6,m.b.ref().update(c);case 6:L.a.success("Nickname has been updated",4e3),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),L.a.error(e.t0.message,4e3);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}();return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(G.a.Header,{children:Object(p.jsx)(G.a.Title,{children:"Dashboard"})}),Object(p.jsxs)(G.a.Body,{children:[Object(p.jsxs)("h3",{children:["Hey, ",n.name]}),Object(p.jsx)(ie,{}),Object(p.jsx)(D.a,{}),Object(p.jsx)(Z,{name:"nickname",initialValue:n.name,onSave:c,label:Object(p.jsx)("h6",{className:"mb-2",children:"Nickname"})}),Object(p.jsx)(re,{})]}),Object(p.jsx)(G.a.Footer,{children:Object(p.jsx)(H.a,{block:!0,color:"red",onClick:t,children:"Sign out"})})]})};var le=function(){var e=z(),t=e.isOpen,n=e.close,a=e.open,r=q("(max-width: 992px)"),s=Object(c.useCallback)((function(){m.b.ref("/status/".concat(m.a.currentUser.uid)).set(x).then((function(){m.a.signOut(),L.a.info("Signed out",4e3),n()})).catch((function(e){L.a.error(e.message,4e3)}))}),[n]);return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)(H.a,{block:!0,color:"blue",onClick:a,children:[Object(p.jsx)(U.a,{icon:"dashboard"}),"Dashboard"]}),Object(p.jsx)(G.a,{full:r,show:t,onHide:n,placement:"left",children:Object(p.jsx)(oe,{onSignOut:s})})]})},ue=n(390),je=Object(c.createContext)();var be=function(e){var t=e.children,n=Object(c.useState)(null),a=Object(O.a)(n,2),r=a[0],s=a[1];return Object(c.useEffect)((function(){var e=m.b.ref("rooms");return e.on("value",(function(e){var t=Object(Y.f)(e.val());s(t)})),function(){e.off()}}),[]),Object(p.jsx)(je.Provider,{value:r,children:t})},de=function(){return Object(c.useContext)(je)},he=n(98);var Oe=function(e){var t=e.room,n=t.createdAt,c=t.name,a=t.lastMessage;return Object(p.jsxs)("div",{children:[Object(p.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[Object(p.jsx)("h3",{className:"text-disappear",children:c}),Object(p.jsx)(he.a,{datetime:a?new Date(a.createdAt):new Date(n),className:"font-normal text-black-45"})]}),Object(p.jsx)("div",{className:"d-flex align-items-center text-black-70",children:a?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("div",{className:"d-flex align-items-center",children:Object(p.jsx)(ne,{src:a.author.avatar,name:a.author.name,size:"sm"})}),Object(p.jsxs)("div",{className:"text-disappear ml-2",children:[Object(p.jsx)("div",{className:"italic",children:a.author.name}),Object(p.jsx)("span",{children:a.text||a.file.name})]})]}):Object(p.jsx)("span",{children:"No messages yet..."})})]})};var fe=function(e){var t=e.aboveElementHeight,n=de(),c=Object(o.g)();return Object(p.jsxs)(ue.a,{appearance:"subtle",vertical:!0,reversed:!0,className:"overflow-y-scroll custom-scroll",style:{height:"calc(100% - ".concat(t,"px)")},activeKey:c.pathname,children:[!n&&Object(p.jsx)(b.a,{center:!0,vertical:!0,content:"Loading",speed:"slow",size:"md"}),n&&n.length>0&&n.map((function(e){return Object(p.jsx)(ue.a.Item,{componentClass:i.b,to:"/chat/".concat(e.id),eventKey:"/chat/".concat(e.id),children:Object(p.jsx)(Oe,{room:e})},e.id)}))]})};var me=function(){var e=Object(c.useRef)(),t=Object(c.useState)(0),n=Object(O.a)(t,2),a=n[0],r=n[1];return Object(c.useEffect)((function(){e.current&&r(e.current.scrollHeight)}),[e]),Object(p.jsxs)("div",{className:"h-100 pt-2",children:[Object(p.jsxs)("div",{children:[Object(p.jsx)(le,{}),Object(p.jsx)(Q,{}),Object(p.jsx)(D.a,{children:"Join conversation"})]}),Object(p.jsx)(fe,{aboveElHeight:a})]})},pe=n(403),xe=n(143),ve=Object(xe.a)();var ge=function(e){var t=e.children,n=e.data;return Object(p.jsx)(ve.Provider,{value:n,children:t})},ke=function(e){return Object(xe.b)(ve,e)},we=n(208);var ye=function(){var e=Object(o.h)().chatId,t=ke((function(e){return e.isReceivingFcm})),n=z(),c=n.isOpen,a=n.close,r=n.open;return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(we.a,{icon:Object(p.jsx)(U.a,{icon:"podcast"}),color:"blue",size:"sm",circle:!0,appearance:t?"default":"ghost",onClick:r}),Object(p.jsxs)(A.a,{show:c,onHide:a,size:"xs",backdrop:"static",children:[Object(p.jsx)(A.a.Header,{children:Object(p.jsx)(A.a.Title,{children:"Notification permission"})}),Object(p.jsxs)(A.a.Body,{children:[t?Object(p.jsxs)("div",{className:"text-center",children:[Object(p.jsx)(U.a,{className:"text-green mb-3",icon:"check-circle",size:"5x"}),Object(p.jsx)("h6",{children:"You are subscribed to broadcast messages sent by admins of this room."})]}):Object(p.jsxs)("div",{className:"text-center",children:[Object(p.jsx)(U.a,{className:"text-blue mb-3",icon:"question-circle",size:"5x"}),Object(p.jsx)("h6",{children:"Do you want to subscribe to messages sent by admins of this room"})]}),Object(p.jsx)("p",{className:"mt-2",children:"To receive notifications make sure you allow Notifications in you browser"}),Object(p.jsxs)("p",{children:["Permission: "," ","granted"===Notification.permission?Object(p.jsx)("span",{className:"text-green",children:"Granted"}):Object(p.jsx)("span",{className:"text-red",children:"Denied"})]})]}),Object(p.jsx)(A.a.Footer,{children:t?Object(p.jsx)(H.a,{color:"green",onClick:function(){m.b.ref("/rooms/".concat(e,"/fcmUsers")).child(m.a.currentUser.uid).remove()},children:"I changed my mind"}):Object(p.jsx)(H.a,{color:"green",onClick:function(){m.b.ref("/rooms/".concat(e,"/fcmUsers")).child(m.a.currentUser.uid).set(!0)},children:"Yes, I do"})})]})]})};function Ce(){var e=z(),t=e.isOpen,n=e.open,c=e.close,a=Object(o.h)().chatId,r=q("(max-width: 992px)"),s=ke((function(e){return e.name})),i=ke((function(e){return e.description})),l=function(e,t){m.b.ref("rooms/".concat(a)).child(e).set(t).then((function(){L.a.success("Successfully updated",4e3)})).catch((function(e){L.a.error(e.message,4e3)}))};return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(H.a,{className:"br-circle",size:"sm",color:"red",onClick:n,children:"A"}),Object(p.jsxs)(G.a,{full:r,show:t,onHide:c,placement:"right",children:[Object(p.jsx)(G.a.Header,{children:Object(p.jsx)(G.a.Title,{children:"Edit Room"})}),Object(p.jsxs)(G.a.Body,{children:[Object(p.jsx)(Z,{initialValue:s,onSave:function(e){l("name",e)},label:Object(p.jsx)("h6",{className:"mb-2",children:"Name"}),emptyMsg:"Name can not be empty"}),Object(p.jsx)(Z,{componentClass:"textarea",rows:5,initialValue:i,onSave:function(e){l("description",e)},emptyMsg:"Description can not be empty",wrapperClassName:"mt-3"})]}),Object(p.jsx)(G.a.Footer,{children:Object(p.jsx)(H.a,{block:!0,onClick:c,children:"Close"})})]})]})}var Ne=Object(c.memo)(Ce);function Se(){var e=z(),t=e.isOpen,n=e.close,c=e.open,a=ke((function(e){return e.description})),r=ke((function(e){return e.name}));return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(H.a,{appearance:"link",className:"px-0",onClick:c,children:"Room information"}),Object(p.jsxs)(A.a,{show:t,onHide:n,children:[Object(p.jsx)(A.a.Header,{children:Object(p.jsxs)(A.a.Title,{children:["About ",r]})}),Object(p.jsxs)(A.a.Body,{children:[Object(p.jsx)("h6",{className:"mb-1",children:"Description"}),Object(p.jsx)("p",{children:a})]}),Object(p.jsx)(A.a.Footer,{children:Object(p.jsx)(H.a,{block:!0,onClick:n,children:"Close"})})]})]})}var Te=Object(c.memo)(Se),De=E.a.Types.StringType,Ie=E.a.Model({title:De().isRequired("Title is required"),message:De().isRequired("Message body is required")}),Ee={title:"",message:""};var Le=function(){var e=Object(o.h)().chatId,t=z(),n=t.isOpen,a=t.open,r=t.close,s=Object(c.useState)(Ee),i=Object(O.a)(s,2),u=i[0],j=i[1],b=Object(c.useState)(!1),f=Object(O.a)(b,2),x=f[0],v=f[1],g=Object(c.useRef)(),k=Object(c.useCallback)((function(e){j(e)}),[]),w=function(){var t=Object(h.a)(Object(d.a)().mark((function t(){var n;return Object(d.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(g.current.check()){t.next=2;break}return t.abrupt("return");case 2:return v(!0),t.prev=3,n=m.d.httpsCallable("sendFcm"),t.next=7,n(Object(l.a)({chatId:e},u));case 7:v(!1),j(Ee),r(),L.a.info("Notification has been sent",7e3),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(3),L.a.error(t.t0.message,7e3);case 16:case"end":return t.stop()}}),t,null,[[3,13]])})));return function(){return t.apply(this,arguments)}}();return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)(H.a,{appearance:"primary",size:"xs",onClick:a,children:[Object(p.jsx)(U.a,{icon:"podcast"})," Broadcast message"]}),Object(p.jsxs)(A.a,{show:n,onHide:r,children:[Object(p.jsx)(A.a.Header,{children:Object(p.jsx)(A.a.Title,{children:"Send notification to room users"})}),Object(p.jsx)(A.a.Body,{children:Object(p.jsxs)(F.a,{fluid:!0,onChange:k,formValue:u,model:Ie,ref:g,children:[Object(p.jsxs)(M.a,{children:[Object(p.jsx)(R.a,{children:"Title"}),Object(p.jsx)(B.a,{name:"title",placeholder:"Enter message title..."})]}),Object(p.jsxs)(M.a,{children:[Object(p.jsx)(R.a,{children:"Message"}),Object(p.jsx)(B.a,{componentClass:"textarea",rows:5,name:"message",placeholder:"Enter notification message..."})]})]})}),Object(p.jsx)(A.a.Footer,{children:Object(p.jsx)(H.a,{block:!0,appearance:"primary",onClick:w,disabled:x,children:"Publish Message"})})]})]})};function He(){var e=ke((function(e){return e.name})),t=ke((function(e){return e.isAdmin})),n=q("(max-width: 992px)");return Object(p.jsxs)("div",{children:[Object(p.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[Object(p.jsxs)("h4",{className:"text-disappear d-flex align-items-center",children:[Object(p.jsx)(U.a,{componentClass:i.b,to:"/",icon:"arrow-circle-left",size:"2x",className:n?"d-inline-block p-0 mr-2 text-blue link-unstyled":"d-none"}),Object(p.jsx)("span",{className:"text-disappear",children:e})]}),Object(p.jsxs)(pe.a,{className:"ws-nowrap",children:[Object(p.jsx)(ye,{}),t&&Object(p.jsx)(Ne,{})]})]}),Object(p.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[t&&Object(p.jsx)(Le,{}),Object(p.jsx)(Te,{})]})]})}var Ue=Object(c.memo)(He),Ae=n(391);var Fe=function(e){var t=e.afterUpload,n=Object(o.h)().chatId,a=z(),r=a.isOpen,s=a.close,i=a.open,l=Object(c.useState)([]),u=Object(O.a)(l,2),j=u[0],b=u[1],f=Object(c.useState)(!1),x=Object(O.a)(f,2),v=x[0],g=x[1],k=function(){var e=Object(h.a)(Object(d.a)().mark((function e(){var c,a,r,i;return Object(d.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c=j.map((function(e){return m.f.ref("/chat/".concat(n)).child(Date.now()+e.name).put(e.blobFile,{cacheControl:"public, max-age=".concat(259200)})})),e.next=4,Promise.all(c);case 4:return a=e.sent,r=a.map(function(){var e=Object(h.a)(Object(d.a)().mark((function e(t){return Object(d.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=t.metadata.contentType,e.t1=t.metadata.name,e.next=4,t.ref.getDownloadURL();case 4:return e.t2=e.sent,e.abrupt("return",{contentType:e.t0,name:e.t1,url:e.t2});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=8,Promise.all(r);case 8:return i=e.sent,e.next=11,t(i);case 11:g(!1),s(),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(0),g(!1),L.a.error(e.t0.message);case 19:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(){return e.apply(this,arguments)}}();return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(K.a.Button,{onClick:i,children:Object(p.jsx)(U.a,{icon:"attachment"})}),Object(p.jsxs)(A.a,{show:r,onHide:s,children:[Object(p.jsx)(A.a.Header,{children:Object(p.jsx)(A.a.Title,{children:"Upload files"})}),Object(p.jsx)(A.a.Body,{children:Object(p.jsx)(Ae.a,{autoUpload:!1,action:"",fileList:j,onChange:function(e){var t=e.filter((function(e){return e.blobFile.size<=512e4})).slice(0,5);b(t)},multiple:!0,listType:"picture-text",className:"w-100",disabled:v})}),Object(p.jsxs)(A.a.Footer,{children:[Object(p.jsx)(H.a,{block:!0,disabled:v,onClick:k,children:"Send to chat"}),Object(p.jsx)("div",{className:"text-right mt-2",children:Object(p.jsx)("small",{children:"* only files less than 5 mb are allowed"})})]})]})]})},Me=n(202);var Re=function(e){var t=Object(o.h)().chatId,n=Object(c.useState)(!1),a=Object(O.a)(n,2),r=a[0],s=a[1],i=Object(c.useState)(!1),l=Object(O.a)(i,2),u=l[0],j=l[1],b=Object(c.useCallback)((function(){s((function(e){return!e}))}),[]),f=Object(c.useCallback)(function(){var n=Object(h.a)(Object(d.a)().mark((function n(c){var a,r;return Object(d.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return j(!0),n.prev=1,n.next=4,m.f.ref("/chat/".concat(t)).child("audio_".concat(Date.now(),".mp3")).put(c.blob,{cacheControl:"public, max-age=".concat(259200)});case 4:return a=n.sent,n.t0=a.metadata.contentType,n.t1=a.metadata.name,n.next=9,a.ref.getDownloadURL();case 9:n.t2=n.sent,r={contentType:n.t0,name:n.t1,url:n.t2},j(!1),e([r]),n.next=19;break;case 15:n.prev=15,n.t3=n.catch(1),j(!1),L.a.error(n.t3.message);case 19:case"end":return n.stop()}}),n,null,[[1,15]])})));return function(e){return n.apply(this,arguments)}}(),[e,t]);return Object(p.jsxs)(K.a.Button,{onClick:b,disabled:u,className:r?"animate-blink":"",children:[Object(p.jsx)(U.a,{icon:"microphone"}),Object(p.jsx)(Me.ReactMic,{record:r,className:"d-none",onStop:f,mimeType:"audio/mp3"})]})};function Be(e,t){return{roomId:t,author:Object(l.a)({name:e.name,uid:e.uid,createdAt:e.createdAt},e.avatar?{avatar:e.avatar}:{}),createdAt:f.a.database.ServerValue.TIMESTAMP,likeCount:0}}var ze=function(){var e=Object(c.useState)(""),t=Object(O.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(!1),s=Object(O.a)(r,2),i=s[0],u=s[1],j=Object(o.h)().chatId,b=w().profile,f=Object(c.useCallback)((function(e){a(e)}),[]),x=function(){var e=Object(h.a)(Object(d.a)().mark((function e(){var t,c,r;return Object(d.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==n.trim()){e.next=2;break}return e.abrupt("return");case 2:return(t=Be(b,j)).text=n,c={},r=m.b.ref("messages").push().key,c["/messages/".concat(r)]=t,c["/rooms/".concat(j,"/lastMessage")]=Object(l.a)(Object(l.a)({},t),{},{msgId:r}),u(!0),e.prev=9,e.next=12,m.b.ref().update(c);case 12:a(""),u(!1),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(9),u(!1),L.a.error(e.t0.message);case 20:case"end":return e.stop()}}),e,null,[[9,16]])})));return function(){return e.apply(this,arguments)}}(),v=Object(c.useCallback)(function(){var e=Object(h.a)(Object(d.a)().mark((function e(t){var n,c;return Object(d.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(!0),n={},t.forEach((function(e){var t=Be(b,j);t.file=e;var c=m.b.ref("messages").push().key;n["/messages/".concat(c)]=t})),c=Object.keys(n).pop(),n["/rooms/".concat(j,"/lastMessage")]=Object(l.a)(Object(l.a)({},n[c]),{},{msgId:c}),e.prev=5,e.next=8,m.b.ref().update(n);case 8:u(!1),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(5),u(!1),L.a.error(e.t0.message);case 15:case"end":return e.stop()}}),e,null,[[5,11]])})));return function(t){return e.apply(this,arguments)}}(),[j,b]);return Object(p.jsx)("div",{children:Object(p.jsxs)(K.a,{children:[Object(p.jsx)(Fe,{afterUpload:v}),Object(p.jsx)(Re,{afterUpload:v}),Object(p.jsx)(J.a,{placeholder:"Write a new message here...",value:n,onChange:f,onKeyDown:function(e){"Enter"===e.key&&(e.preventDefault(),x())}}),Object(p.jsx)(K.a.Button,{color:"blue",appearance:"primary",onClick:x,disabled:i,children:Object(p.jsx)(U.a,{icon:"send"})})]})})},qe=n(101),Pe=n(199),Ve=n(209),_e=n(404),Qe=function(e){if(!e)return"gray";switch(e.state){case"online":return"green";case"offline":return"red";default:return"gray"}},Ge=function(e){return e?"online"===e.state?"Online":"Last online ".concat(new Date(e.last_changed).toLocaleDateString()):"Unknown state"};var Ye=function(e){var t=function(e){var t=Object(c.useState)(null),n=Object(O.a)(t,2),a=n[0],r=n[1];return Object(c.useEffect)((function(){m.b.ref("/status/".concat(e)).on("value",(function(e){if(e.exists()){var t=e.val();r(t)}}))}),[e]),a}(e.uid);return Object(p.jsx)(Pe.a,{placement:"top",trigger:"hover",speaker:Object(p.jsx)(Ve.a,{children:Ge(t)}),children:Object(p.jsx)(_e.a,{className:"cursor-pointer",style:{backgroundColor:Qe(t)}})})},Ke=["isVisible","iconName","tooltip","onClick","badgeContent"];function Je(e){var t=e.condition,n=e.children;return t?Object(p.jsx)(_e.a,{content:t,children:n}):n}var We=function(e){var t=e.isVisible,n=e.iconName,c=e.tooltip,a=e.onClick,r=e.badgeContent,s=Object(u.a)(e,Ke);return Object(p.jsx)("div",{className:"ml-2",style:{visibility:t?"visible":"hidden"},children:Object(p.jsx)(Je,{condition:r,children:Object(p.jsx)(Pe.a,{placement:"top",delay:0,delayHide:0,delayShow:0,trigger:"hover",speaker:Object(p.jsx)(Ve.a,{children:c}),children:Object(p.jsx)(we.a,Object(l.a)(Object(l.a)({},s),{},{onClick:a,circle:!0,size:"xs",icon:Object(p.jsx)(U.a,{icon:n})}))})})})};var Ze=function(e){var t=e.src,n=e.fileName,c=z(),a=c.isOpen,r=c.open,s=c.close;return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("input",{type:"image",src:t,alt:"file",onClick:r,className:"mw-100 mh-100 w-auto"}),Object(p.jsxs)(A.a,{show:a,onHide:s,children:[Object(p.jsx)(A.a.Header,{children:Object(p.jsx)(A.a.Title,{children:n})}),Object(p.jsx)(A.a.Body,{children:Object(p.jsx)("div",{children:Object(p.jsx)("img",{src:t,height:"100%",width:"100%",alt:"file"})})}),Object(p.jsx)(A.a.Footer,{children:Object(p.jsx)("a",{href:t,target:"_blank",rel:"noopener noreferrer",children:"View original"})})]})]})},$e=["profile","children"];var Xe=function(e){var t=e.profile,n=e.children,c=Object(u.a)(e,$e),a=z(),r=a.isOpen,s=a.close,i=a.open,o=t.name,j=t.avatar,b=t.createdAt,d=t.name.split(" ")[0],h=new Date(b).toLocaleDateString();return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(H.a,Object(l.a)(Object(l.a)({},c),{},{onClick:i,children:d})),Object(p.jsxs)(A.a,{show:r,onHide:s,children:[Object(p.jsx)(A.a.Header,{children:Object(p.jsxs)(A.a.Title,{children:[d," profile"]})}),Object(p.jsxs)(A.a.Body,{className:"text-center",children:[Object(p.jsx)(ne,{src:j,name:o,className:"width-200 height-200 img-fullsize font-huge"}),Object(p.jsx)("h4",{children:o}),Object(p.jsxs)("p",{children:["Member since ",h]})]}),Object(p.jsxs)(A.a.Footer,{children:[n,Object(p.jsx)(H.a,{block:!0,onClick:s,children:"Close"})]})]})]})},et=function(e){return e.contentType.includes("image")?Object(p.jsx)("div",{className:"height-220",children:Object(p.jsx)(Ze,{src:e.url,fileName:e.name})}):e.contentType.includes("audio")?Object(p.jsxs)("audio",{controls:!0,children:[Object(p.jsx)("source",{src:e.url,type:"audio/mp3"}),"Your browser does not support the audio element"]}):Object(p.jsxs)("a",{href:e.url,children:["Download ",e.name]})};function tt(e){var t=e.message,n=e.handleAdmin,a=e.handleLike,r=e.handleDelete,s=t.author,i=t.createdAt,o=t.text,u=t.file,j=t.likes,b=t.likeCount,d=function(){var e=Object(c.useState)(!1),t=Object(O.a)(e,2),n=t[0],a=t[1],r=Object(c.useRef)(null),s=function(){return a(!0)},i=function(){return a(!1)};return Object(c.useEffect)((function(){var e=r.current;return e&&(e.addEventListener("mouseover",s),e.addEventListener("mouseout",i)),function(){e.removeEventListener("mouseover",s),e.removeEventListener("mouseout",i)}}),[r.current]),[r,n]}(),h=Object(O.a)(d,2),f=h[0],x=h[1],v=q("(max-width: 992px)"),g=ke((function(e){return e.isAdmin})),k=ke((function(e){return e.admins})).includes(s.uid),w=m.a.currentUser.uid===s.uid,y=g&&!w,C=v||x,N=j&&Object.keys(j).includes(m.a.currentUser.uid);return Object(p.jsxs)("li",{className:"padded mb-1 cursor-pointer ".concat(x?"bg-black-02":""),ref:f,children:[Object(p.jsxs)("div",{className:"d-flex align-items-center font-bolder mb-1",children:[Object(p.jsx)(Ye,{uid:s.uid}),Object(p.jsx)(ne,{src:s.avatar,name:s.name,className:"ml-1",size:"xs"}),Object(p.jsx)(Xe,{profile:s,appearance:"link",className:"p-0 ml-1 text-black",children:y&&Object(p.jsx)(H.a,{block:!0,onClick:function(){return n(s.uid)},color:"blue",children:k?"Remove admin permission":"Give admin in this room"})}),Object(p.jsx)(he.a,{datetime:i,className:"font-normal text-black-45 ml-2"}),Object(p.jsx)(We,Object(l.a)(Object(l.a)({},N?{color:"red"}:{}),{},{isVisible:C,iconName:"heart",tooltip:"Like this message",onClick:function(){return a(t.id)},badgeContent:b})),w&&Object(p.jsx)(We,{isVisible:C,iconName:"close",tooltip:"Delete this message",onClick:function(){return r(t.id,u)}})]}),Object(p.jsxs)("div",{children:[o&&Object(p.jsx)("span",{className:"word-breal-all",children:o}),u&&et(u)]})]})}var nt=Object(c.memo)(tt),ct=m.b.ref("/messages");var at=function(){var e=Object(o.h)().chatId,t=Object(c.useState)(null),n=Object(O.a)(t,2),a=n[0],r=n[1],s=Object(c.useState)(15),i=Object(O.a)(s,2),u=i[0],j=i[1],b=Object(c.useRef)(),f=a&&0===a.length,x=a&&a.length>0,v=Object(c.useCallback)((function(t){var n=b.current;ct.off(),ct.orderByChild("roomId").equalTo(e).limitToLast(t||15).on("value",(function(e){var t=Object(Y.f)(e.val());r(t),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:30;return(100*e.scrollTop/(e.scrollHeight-e.clientHeight)||0)>t}(n)&&(n.scrollTop=n.scrollHeight)})),j((function(e){return e+15}))}),[e]),g=Object(c.useCallback)((function(){var e=b.current,t=e.scrollHeight;v(u),setTimeout((function(){var n=e.scrollHeight;e.scrollTop=n-t}),200)}),[v,u]);Object(c.useEffect)((function(){var e=b.current;return v(),setTimeout((function(){e.scrollTop=e.scrollHeight}),200),function(){ct.off("value")}}),[v]);var k=Object(c.useCallback)(function(){var t=Object(h.a)(Object(d.a)().mark((function t(n){var c,a;return Object(d.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=m.b.ref("/rooms/".concat(e,"/admins")),t.next=3,c.transaction((function(e){return e&&(e[n]?e[n]=null:(e[n]=!0,a="Admin permission granted")),e}));case 3:L.a.info(a,4e3);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[e]),w=Object(c.useCallback)(function(){var e=Object(h.a)(Object(d.a)().mark((function e(t){var n,c,a;return Object(d.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=m.a.currentUser.uid,c=m.b.ref("/messages/".concat(t)),e.next=4,c.transaction((function(e){return e&&(e.likes&&e.likes[n]?(e.likeCount-=1,e.likes[n]=null,a="Like removed"):(e.likeCount+=1,e.likes||(e.likes={}),e.likes[n]=!0,a="Like added")),e}));case 4:L.a.info(a,4e3);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]),y=Object(c.useCallback)(function(){var t=Object(h.a)(Object(d.a)().mark((function t(n,c){var r,s,i;return Object(d.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(window.confirm("Delete this message?")){t.next=2;break}return t.abrupt("return");case 2:return r=a[a.length-1].id===n,(s={})["/messages/".concat(n)]=null,r&&a.length>1&&(s["/rooms/".concat(e,"/lastMessage")]=Object(l.a)(Object(l.a)({},a[a.length-2]),{},{msgId:a[a.length-2].id})),r&&1===a.length&&(s["/messages/".concat(n)]=null),t.prev=7,t.next=10,m.b.ref().update(s);case 10:L.a.info("Message has been deleted"),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(7),L.a.error(t.t0.message);case 16:if(!c){t.next=26;break}return t.prev=17,i=m.f.refFromURL(c.url),t.next=21,i.delete();case 21:t.next=26;break;case 23:return t.prev=23,t.t1=t.catch(17),t.abrupt("return",L.a.error(t.t1.message));case 26:case"end":return t.stop()}}),t,null,[[7,13],[17,23]])})));return function(e,n){return t.apply(this,arguments)}}(),[e,a]);return Object(p.jsxs)("ul",{ref:b,className:"msg-list custom-scroll",children:[a&&a.length>=15&&Object(p.jsx)("li",{className:"text-center mt-2 mb-2",children:Object(p.jsx)(H.a,{onClick:g,color:"green",children:"Load more"})}),f&&Object(p.jsx)("li",{children:"No messages yet"}),x&&function(){var e=Object(Y.c)(a,(function(e){return new Date(e.createdAt).toDateString()})),t=[];return Object.keys(e).forEach((function(n){t.push(Object(p.jsx)("li",{className:"text-center mb-1 padded",children:n},n));var c=e[n].map((function(e){return Object(p.jsx)(nt,{message:e,handleAdmin:k,handleLike:w,handleDelete:y},e.id)}));t.push.apply(t,Object(qe.a)(c))})),t}()]})};var rt=function(){var e=Object(o.h)().chatId,t=de();if(!t)return Object(p.jsx)(b.a,{center:!0,vertical:!0,size:"md",content:"Loading",speed:"slow"});var n=t.find((function(t){return t.id===e}));if(!n)return Object(p.jsxs)("h6",{className:"text-center mt-page",children:["Chat ",e," not found"]});var c=n.name,a=n.description,r=Object(Y.e)(n.admins),s=Object(Y.e)(n.fcmUsers),i=r.includes(m.a.currentUser.uid),l={name:c,description:a,admins:r,isAdmin:i,isReceivingFcm:s.includes(m.a.currentUser.uid)};return Object(p.jsxs)(ge,{data:l,children:[Object(p.jsx)("div",{className:"chat-top",children:Object(p.jsx)(Ue,{})}),Object(p.jsx)("div",{className:"chat-middle",children:Object(p.jsx)(at,{})}),Object(p.jsx)("div",{className:"chat-bottom",children:Object(p.jsx)(ze,{})})]})};var st=function(){var e=q("(min-width: 992px)"),t=Object(o.i)().isExact,n=e||t;return Object(p.jsx)(be,{children:Object(p.jsx)(N.a,{fluid:!0,className:"h-100",children:Object(p.jsxs)(S.a,{className:"h-100",children:[n&&Object(p.jsx)(T.a,{xs:24,md:8,className:"h-100",children:Object(p.jsx)(me,{})}),Object(p.jsxs)(o.d,{children:[Object(p.jsx)(o.b,{exact:!0,path:"/chat/:chatId",children:Object(p.jsx)(T.a,{xs:24,md:16,className:"h-100",children:Object(p.jsx)(rt,{})})}),Object(p.jsx)(o.b,{children:e&&Object(p.jsx)(T.a,{xs:24,md:16,className:"h-100",children:Object(p.jsx)("h6",{className:"text-center mt-page",children:"Please select chat"})})})]})]})})})},it=(n(378),["children"]);var ot=function(e){var t=e.children,n=Object(u.a)(e,it),c=w(),a=c.profile,r=c.isLoading;return r&&!a?Object(p.jsx)(j.a,{children:Object(p.jsx)(b.a,{center:!0,vertical:!0,size:"md",content:"Loading",speed:"slow"})}):a&&!r?Object(p.jsx)(o.a,{to:"/"}):Object(p.jsx)("div",{children:Object(p.jsx)(o.b,Object(l.a)(Object(l.a)({},n),{},{children:t}))})},lt=n(203),ut=n(204),jt=n(205),bt=n(206),dt=function(e){Object(jt.a)(n,e);var t=Object(bt.a)(n);function n(e){var c;return Object(lt.a)(this,n),(c=t.call(this,e)).state={error:null,errorInfo:null},c}return Object(ut.a)(n,[{key:"componentDidCatch",value:function(e,t){this.setState({error:e,errorInfo:t})}},{key:"render",value:function(){return this.state.errorInfo?Object(p.jsxs)("div",{children:[Object(p.jsx)("h2",{children:"Something went wrong."}),Object(p.jsxs)("details",{style:{whiteSpace:"pre-wrap"},children:[this.state.error&&this.state.error.toString(),Object(p.jsx)("br",{}),this.state.errorInfo.componentStack]})]}):this.props.children}}]),n}(a.a.Component),ht=Object(c.lazy)((function(){return n.e(3).then(n.bind(null,416))}));var Ot=function(){return Object(p.jsx)(dt,{children:Object(p.jsx)(k,{children:Object(p.jsxs)(o.d,{children:[Object(p.jsx)(ot,{path:"/signin",children:Object(p.jsx)(c.Suspense,{fallback:Object(p.jsx)("div",{children:"Loading..."}),children:Object(p.jsx)(ht,{})})}),Object(p.jsx)(C,{path:"/",children:Object(p.jsx)(st,{})})]})})})};s.a.createRoot(document.getElementById("root")).render(Object(p.jsx)(i.a,{children:Object(p.jsx)(Ot,{})}))},9:function(e,t,n){"use strict";n.d(t,"c",(function(){return s})),n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return l})),n.d(t,"f",(function(){return u})),n.d(t,"d",(function(){return j})),n.d(t,"e",(function(){return b}));var c=n(384),a=n(28),r=(n(217),n(219),n(381),n(380),n(382),n(25)),s="BFQ7Yktz1zh7f437wQu7RH64PloELIHsD6GZjdW2mZQz5E2oBkeHmD1S7Lpe2tQrlq9otU-dqm1tM8DqOb_uvro",i=a.a.initializeApp({apiKey:"AIzaSyAeBsJrRseLRbEgyafJqqG5tIS1YEEdu6U",authDomain:"chat-web-app-685d5.firebaseapp.com",databaseURL:"https://chat-web-app-685d5-default-rtdb.firebaseio.com",projectId:"chat-web-app-685d5",storageBucket:"chat-web-app-685d5.appspot.com",messagingSenderId:"943062344409",appId:"1:943062344409:web:3c22da0a746da76dcc54c8"}),o=i.auth(),l=i.database(),u=i.storage(),j=i.functions("europe-west3"),b=a.a.messaging.isSupported()?i.messaging():null;b&&(b.getToken({vapidKey:"BFQ7Yktz1zh7f437wQu7RH64PloELIHsD6GZjdW2mZQz5E2oBkeHmD1S7Lpe2tQrlq9otU-dqm1tM8DqOb_uvro"}),b.onMessage((function(e){var t=e.notification,n=t.title,a=t.body;c.a.info({title:n,description:a,duration:0})}))),r.d&&j.useEmulator("localhost",5001)}},[[379,1,2]]]);
//# sourceMappingURL=main.f5668e51.chunk.js.map